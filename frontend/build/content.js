"use strict";let a="/api/";a="http://localhost:5050/api/";const i="There is something wrong with net connection, please try again later.",l={signIn:t=>{t.url=a+"login/",t.method="post",n(t)},getData:t=>{t.url=a+"getData/",t.method="get",n(t)},detect:t=>{t.url=a+"detectText/",t.method="post";const e=document.createElement("div");e.id="popup",e.innerHTML=`
      <p><strong>Loading analysis...</strong></p>
      <div id="popup-content">Loading...</div>
      <button id="close-popup">Close</button>
    `,document.body.appendChild(e),document.getElementById("close-popup").onclick=()=>{e.remove()},n(t)}};function n(t){u(t)}function u(t){t.data===void 0&&(t.data={}),t.method=t.method||"post";let e={},s=null;t.formData?(s=new FormData,Object.keys(t.data).forEach(function(d){s.append(d,t.data([d]))})):(e["Content-Type"]="application/json;charset=UTF-8",s=JSON.stringify(t.data));let o={method:t.method,headers:e,body:s};fetch(t.url,o).then(d=>d.json()).then(d=>{t.done&&t.done(),t.success&&t.success(d)}).catch(()=>{t.done&&t.done(),t.fail&&t.fail(i)})}chrome.runtime.onMessage.addListener((t,e,s)=>{if(t.type==="showPopup"){const o={data:{text:t.text},success:d=>{const p=document.getElementById("popup-content");p.innerHTML=`
          <div id="result">Detection result: Credible</div>
          <div id="detection-text">Detection text: ${d.detectedText}</div>`}};l.detect(o),s({status:"success"})}});
