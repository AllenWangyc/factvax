"use strict";let o="/api/";o="http://localhost:5050/api/";const l="There is something wrong with net connection, please try again later.",c={signIn:e=>{e.url=o+"login/",e.method="post",s(e)},getData:e=>{e.url=o+"getData/",e.method="get",s(e)},detect:e=>{e.url=o+"detectText/",e.method="post",console.log(o),s(e)}};function s(e){r(e)}function r(e){e.data===void 0&&(e.data={}),e.method=e.method||"post";let a={},t=null;e.formData?(t=new FormData,Object.keys(e.data).forEach(function(n){t.append(n,e.data([n]))})):(a["Content-Type"]="application/json;charset=UTF-8",t=JSON.stringify(e.data));let d={method:e.method,headers:a,body:t};fetch(e.url,d).then(n=>n.json()).then(n=>{e.done&&e.done(),e.success&&e.success(n)}).catch(()=>{e.done&&e.done(),e.fail&&e.fail(l)})}chrome.runtime.onInstalled.addListener(function(){chrome.action.disable(),chrome.declarativeContent.onPageChanged.removeRules(void 0,()=>{const a=[{conditions:[new chrome.declarativeContent.PageStateMatcher({pageUrl:{schemes:["https"]}})],actions:[new chrome.declarativeContent.ShowAction]}];chrome.declarativeContent.onPageChanged.addRules(a)})});chrome.runtime.onInstalled.addListener(()=>{chrome.contextMenus.create({id:"detect-text",title:"Detect information",contexts:["selection"]})});chrome.contextMenus.onClicked.addListener((e,a)=>{if(e.menuItemId==="detect-text"){const t=e.selectionText;h(t)}});function h(e){const a={data:{text:e},success:t=>{console.log(t)}};c.detect(a)}
